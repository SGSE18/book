(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{185:function(t,e,s){"use strict";s.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"smart-contracts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#smart-contracts","aria-hidden":"true"}},[this._v("#")]),this._v(" Smart Contracts")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"vulnerabilities"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vulnerabilities","aria-hidden":"true"}},[this._v("#")]),this._v(" Vulnerabilities")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Wie fatal die Folgen dieser Schwachstellen sind, zeigen die jüngsten Ereignisse.\nSo konnten Angreifer, Ethereum Tokens im Wert von rund 60 Millionen Dollar,\ndurch die Ausnutzung einer Schwachstelle im DAO (Dezentrale Autonome\nOrganisation) Smart Contract, entwenden ["),e("a",{attrs:{href:"ref_cast16"}},[this._v("CAST16")]),this._v("]. In einem\nanderen Fall sorgte eine Schwachstelle im Smart Contract dafür, dass Tokens im\nWert von rund einer halben Millionen Dollar nicht mehr ausgezahlt werden\nkonnten ["),e("a",{attrs:{href:"ref_gove16"}},[this._v("GOVE16")]),this._v("].")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"call-stack-tiefe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#call-stack-tiefe","aria-hidden":"true"}},[this._v("#")]),this._v(" Call-Stack-Tiefe")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("contract auction "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("mapping")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" uint"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" refunds"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// [...]")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("withdrawRefund")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address recipient"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    uint refund "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" refunds"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("recipient"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    refunds"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("recipient"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    recipient"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("send")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refund"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Obwohl die Funktion in sich keine Fehler aufweist und auch dem Empfänger\nvertraut werden kann, schlägt der Aufruf "),e("code",[this._v("recipient.send(refund)")]),this._v(" fehl,\nda "),e("code",[this._v("send(...)")]),this._v(" ebenfalls die Call-Stack-Tiefe erhöht. Da jedoch alle zuvor\nausgeführten Änderungen erfolgreich waren, wird das Konto des Empfängers auf 0\ngesetzt, ohne den Betrag tatsächlich transferiert zuhaben.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Um eine derartige Schwachstelle zu vermeiden, ist Empfehlenswert den\nRückgabewert der "),e("code",[this._v("send(...)")]),this._v("-Funktion auszuwerten und die Ausführung wie folgt\nmit "),e("code",[this._v("throw")]),this._v(" zu terminieren.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("recipient"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("send")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refund"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Durch die Terminierung mit "),e("code",[this._v("throw")]),this._v(", werden durch die Transaktion, keine State-\nÄnderungen in den Distributed Ledger übernommen. Damit bleibt das Guthaben\ndes Empfängers auch dann erhalten, wenn der darauf folgende Transfer\nfehlschlägt. Durch diesen Angriff kann sich der Angreifer zwar keinen\nfinanziellen Vorteil verschaffen, aber einen Schaden bei den Guthabenbesitzern\nverursachen.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"re-entrency-und-cross-function-race-conditions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#re-entrency-und-cross-function-race-conditions","aria-hidden":"true"}},[this._v("#")]),this._v(" Re-Entrency und Cross-function Race Conditions")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Auf den ersten Blick erfüllen beiden Funktionen im folgenden Smart Contract die\nan die jeweilige Funktion gestellten Anforderungen. Der Benutzer darf mit der\nFunktion "),e("code",[this._v("transfer(...)")]),this._v(" einen Betrag, der sein eigenes Guthaben nicht\nübersteigt, einer beliebigen anderen Adresse zuordnen und mit der Funktion\n"),e("code",[this._v("withdrawBalance()")]),this._v(" das gesamte eigene Guthaben, an die hinterlegte Adresse\nüberweisen.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("contract auction "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("mapping")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" uint"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("transfer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address to"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uint amount"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" amount"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("to"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+=")]),t._v(" amount"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("-=")]),t._v(" amount"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("withdrawBalance")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      uint amountToWithdraw "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("value")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amountToWithdraw"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      userBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Mit der sogenannten Re-Entrency Attacke, kann sich ein Angreifer das gesamte\nGuthaben in dem Smart Contract (Guthaben aller Benutzer) auszahlen lassen,\nin dem er einen eigenen Smart Contract mit der Default-Funktion implementiert.\nDie Default-Funktion in einem Smart Contract wird aufgerufen, sobald eine\nTransaktion an die Smart Contract Adresse eingeht. Die Default-Funktion ruft\nwiederum erneut die "),s("code",[t._v("withdrawBalance()")]),t._v("-Funktion auf. Da in der\n"),s("code",[t._v("withdrawBalance()")]),t._v("-Funktion das Guthaben des Angreifers an die böswillige\nSmart Contract Adresse überwiesen wird, ergibt sich somit eine rekursive\nSchleife zwischen den beiden Smart Contracts. Damit wird die Zeile\n"),s("code",[t._v("userBalances[msg.sender] = 0")]),t._v(" erst erreicht, wenn das gesamte Guthaben im\nSmart Contract aufgebraucht ist, wodurch die "),s("code",[t._v("call(...)")]),t._v("-Funktion fehlschlägt.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Statt des erneuten Aufrufs der "),e("code",[this._v("withdrawBalance()")]),this._v("-Funktion, kann der Angreifer\nauch eine Cross-function Race Condition provozieren. Dazu wird erneut ein\nböswilliger Smart Contract implementiert und stattdessen diesmal die\n"),e("code",[this._v("transfer(...)")]),this._v("-Funktion in der Default-Funktion aufgerufen. Somit wird das\nGuthaben einer anderen Adresse zugeordnet, bevor das seiner Adresse zugeordnete\nGuthaben auf 0 gesetzt wird.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Beide Schwachstellen lassen sich beheben, in dem das Guthaben der aufrufenden\nAdresse vor der Ausführung der Überweisung auf 0 gesetzt wird. Um im Fehlerfall\ndas Guthaben wiederherzustellen, empfiehlt es sich zusätzlich den Rückgabewert\nder "),e("code",[this._v("send()")]),this._v("-Funktion zu prüfen, die Ausführung mit "),e("code",[this._v("throw")]),this._v(" zu terminieren und\ndamit alle durch die Transaktion entstandenen Änderungen am State, rückgängig zu\nmachen.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"denial-of-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#denial-of-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Denial of Service")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Im folgenden Smart Contract sollen die Teilnehmer einer Auktion, mit dem Aufruf\nder "),s("code",[t._v("bid()")]),t._v("-Funktion an der Auktion teilnehmen können. Dazu muss der Teilnehmer\neinen Betrag größer als das aktuelle Höchstgebot überweisen. Wird das aktuelle\nHöchstgebot überboten, erhält der alte Höchstbietende seinen zuvor überwiesenen\nBetrag zurück. Bei der Implementierung werden alle zuvor genannten\nVorgehensweisen, wie die Prüfung des Rückgabewerts der "),s("code",[t._v("send(...)")]),t._v("-Funktion\nund die Terminierung mit "),s("code",[t._v("throw")]),t._v(" im Fehlerfall, entsprechend in der\n"),s("code",[t._v("bid()")]),t._v("-Funktion implementiert.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("contract auction "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  address currentLeader"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  uint highestBid"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("bid")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" highestBid"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("currentLeader"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("send")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("highestBid"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      currentLeader "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      highestBid "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In diesem Fall kann ein Angreifer jedoch die Abgabe weitere Gebote blockieren,\nin dem er einen Smart Contract mit einer Default-Funktion implementiert, die\nimmer zu einem Fehler, z.B durch die Überschreitung der Call Stack Tiefe, führt.\nWird nun ein neues Höchstgebot abgegeben, erhält der aktuelle Höchstbieter\n(Angreifer) sein Gebot wieder, wodurch die Default-Funktion im Smart Contract\ndes Angreifers aufgerufen wird. Da diese jedoch fehlschlägt, liefert "),e("code",[this._v("send(...)")]),this._v("\neinen Fehler zurück, wodurch die Ausführung terminiert wird und alle Änderungen\nrückgängig gemacht werden. Somit ist der Angreifer weiterhin der Höchstbietende\nund neue Höchstgebote schlagen immer fehl.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Eine mögliche Lösung besteht darin, in diesem Fall keine Terminierung durch den\n"),e("code",[this._v("throw")]),this._v(" im Fehlerfall vorzunehmen. Alternativ kann auch eine Liste der\nalten Höchstbietenden zzgl. der Gebote geführt und ganz auf die automatische\nAuszahlung verzichtet werden. Über eine zusätzliche Funktion können sich\nanschließend die in dieser Liste geführten Höchstbieter Ihr Gebot erstatten\nlassen.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"sicherheitsmassnahmen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sicherheitsmassnahmen","aria-hidden":"true"}},[this._v("#")]),this._v(" Sicherheitsmaßnahmen")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"checks-effects-interactions-pattern"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#checks-effects-interactions-pattern","aria-hidden":"true"}},[this._v("#")]),this._v(" Checks-Effects-Interactions-Pattern")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Smart Contracts können direkt oder indirekt mit anderen Smart Contracts im\nDistributed Ledger interagieren. Unabhängig davon, ob diese Interaktion\nbeabsichtigt ist oder durch die Default-Funktion eines Zahlungsempfänger\nherbeigeführt wird, sollte in jedem Fall bedacht werden, dass durch den Aufruf\neiner externen Funktion, auch der Kontrollfluss an diese übergeben wird. Um die\nRisiken, die damit einhergehen zu minimieren, kann das\nChecks-Effects-Interactions-Muster angewandt werden ["),e("a",{attrs:{href:"#ref_voll18"}},[this._v("VOLL18")]),this._v("].")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Diese ähneln den Coding Standards der "),e("em",[this._v("klassischen")]),this._v(" Softwareentwicklung\n["),e("a",{attrs:{href:"#ref_seac18"}},[this._v("SEAC18")]),this._v("] mit der Ausnahme, dass die Änderungen am State schon\nvorgenommen werden, bevor die damit verbundene Aktion erfolgreich durchgeführt\nwurde. Das Muster wird in folgende Teilschritte unterteilt.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("p",[s("strong",[t._v("Eingabe Parameter und State prüfen")])]),s("p",[t._v("Alle Eingabe Parameter der Funktion werden zunächst validiert und ggf. mit\ndem State abgeglichen. Dazu zählt die Prüfung ob der Aufrufer die Funktion\naufrufen darf oder über das in den Eingabeparametern angeforderte Guthaben\nverfügt.")])]),s("li",[s("p",[s("strong",[t._v("State Änderungen vornehmen")])]),s("p",[t._v("Nach erfolgreicher Validierung der Parameter werden anschließend die\nÄnderungen am State vorgenommen.")])]),s("li",[s("p",[s("strong",[t._v("Smart Contract Interaktionen durchführen")])]),s("p",[t._v("Erst zum Schluss werden alle Aktionen durchgeführt, die zu einer direkten\noder indirekten Interaktion mit anderen Smart Contracts führen können. Im\nFehlerfall wird die Ausführung mit einem "),s("code",[t._v("throw")]),t._v(" beendet, sodass Änderungen\nam State aus Schritt 2 rückgängig gemacht werden.\nWie in Beispiel "),s("a",{attrs:{href:"#denial-of-service"}},[t._v("DoS")]),t._v(" demonstriert, hängt die\nTerminierung mit "),s("code",[t._v("throw")]),t._v(" jedoch stark vom Anwendungsfall ab.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"update-und-andere-schutzmechanismen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update-und-andere-schutzmechanismen","aria-hidden":"true"}},[this._v("#")]),this._v(" Update- und andere Schutzmechanismen")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"formale-verifikation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#formale-verifikation","aria-hidden":"true"}},[this._v("#")]),this._v(" Formale Verifikation")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("em",[t._v('"Im Spektrum der qualitätssichernden Maßnahmen im Software-Entwurf gehören\nformale Spezifikations- und Verifikationsmethoden heute zweifellos zu den\nstärksten Waffen in puncto Fehlererkennung und Nachweis von\nKorrektheitseigenschaften"')]),t._v(" ["),s("a",{attrs:{href:"#ref_reif99"}},[t._v("REIF99")]),t._v("]. Dazu werden die zu überprüfende\nSoftware und die Spezifikation in einem mathematischen Theorem formalisiert, um\nautomatisiert, mittels Theorembeweisern, eventuelle Abweichungen des\nSoftwaremodells von der Spezifikation nachzuweisen. Zu den bekanntesten\nTheorembeweisern, gemessen an der bereits formalisierten\n"),s("a",{attrs:{href:"http://www.cs.ru.nl/~freek/100/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Top 100 mathematischer Sätze")]),t._v(", gehören\n"),s("a",{attrs:{href:"http://www.cl.cam.ac.uk/~jrh13/hol-light/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HOL Light")]),t._v(" und\n"),s("a",{attrs:{href:"https://isabelle.in.tum.de/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Isabelle/HOL")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Um für die Formalisierung eines Smart Contracts, nicht die gesamte Ethereum\nVirtual Machine formalisieren zu müssen, existiert bereits ein Model der EVM für\ndiverse Theorembeweiser ["),e("a",{attrs:{href:"#ref_hira17"}},[this._v("HIRA17")]),this._v("] zu denen auch der Isabelle/HOL\nzählt. Basierend auf diesem Modell der EVM, kann nun vielmehr nur der Smart\nContract formalisiert und gegen eine gegebe Spezifikation geprüft werden.\nDarüber hinaus gibt es noch weitere Ansätze die EVM zu formalisieren\n["),e("a",{attrs:{href:"#ref_hild17"}},[this._v("HILD17")]),this._v("] und folgende Werkzeuge, um Schwachstellen im Smart\nContract zu lokalisieren.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"mythril"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mythril","aria-hidden":"true"}},[this._v("#")]),this._v(" Mythril")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Dieses Tool ist spezialisiert auf die formale Verifikation von Smart Contracts\nund bietet dazu sowohl eine API um eigene Spezifikationen zu definieren, als\nauch ein CLI (Command Line Interface) um typische Fehler im Smart Contract\nnachzuweisen. Angewandt auf das "),e("a",{attrs:{href:"#re-entrency-und-cross-function-race-conditions"}},[this._v("Re-Entrency Beispiel")]),this._v("\naus dem vorherigen Abschnitt, wird unteranderem folgender Hinweis generiert.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ myth -x /tmp/test.sol\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("==")]),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" State change after external call "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v("\nType: Warning\nContract: Unknown\nFunction name: withdrawBalance"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nPC address: 360\nThe contract account state is changed after an external call. Consider that the called contract could re-enter the "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" before this state change takes place. This can lead to business logic vulnerabilities.\n--------------------\nIn file: /tmp/test.sol:12\nuserBalances"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg.sender"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0\n--------------------\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Neben einer Reihe weiterer Warnungen und Informationen, wird die Re-Entrancy\nSchwachstelle korrekt erkannt und die entsprechende Zeile im Solidity Code\nausgegeben. Neben der Schwachstelle wird ebenfalls ein Hinweis auf die\nSicherheitsmaßnahme, in diesem Fall das "),e("a",{attrs:{href:"#checks-effects-interactions-pattern"}},[this._v("Checks-Effects-Interactions-Pattern")]),this._v(",\nausgegeben.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"smart-contract-graph"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#smart-contract-graph","aria-hidden":"true"}},[this._v("#")]),this._v(" Smart Contract Graph")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Eine weitere nützliche Funktion ist dass generieren von Kontrollflussgraphen\nzu einem Smart Contract. Dazu kann neben dem Paramter "),e("code",[this._v("-g")]),this._v(", entweder der\nSolidity Code oder der Bytecode der CLI übergeben werden.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(65),alt:"Control Flow Graph",title:"Control Flow Graph"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Die Darstellung zeigt einen Ausschnitt aus dem Graphen, zu dem "),s("a",{attrs:{href:"#re-entrency-und-cross-function-race-conditions"}},[t._v("Re-Entrancy")]),t._v("\nBeispiel aus dem vorherigen Abschnitt. Die Knoten stellen dabei Codeblöcke dar\nund enthalten die EVM-Befehle ["),s("a",{attrs:{href:"#ref_evm18"}},[t._v("EVMO18")]),t._v("], die beim Erreichen dieses\nKnotens ausgeführt werden. Die Kanten repräsentieren den Pfad, die je nach\nErfüllung der an der Kante ausgewiesenen Bedingung genommen wird. Die Bedingungen\nin der Darstellung entsprechen der "),s("code",[t._v("if (userBalances[msg.sender] >= amount)")]),t._v(" in\nder "),s("code",[t._v("transfer(...)")]),t._v("-Funktion.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"spezifikationen-definieren"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spezifikationen-definieren","aria-hidden":"true"}},[this._v("#")]),this._v(" Spezifikationen definieren")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Neben den bereits verfügbaren Spezifikationen, die per CLI gegen eigene Smart\nContract ausgeführt werden können, ist es ebenfalls möglich eigene\nSpezifikationen zu implementieren. Angenommen es soll laut Spezifikation\nsichergestellt werden, dass eine bestimmte State-Variable nur von dem Smart\nContract Besitzer geändert werden kann. Unter Verwendung der im Ethereum Yellow\nPaper ["),e("a",{attrs:{href:"#ref_wood18"}},[this._v("WOOD18")]),this._v("] eingeführten Notation kann dies wie folgt als\nTheorem ausgedrückt werden.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.8500000000000001em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1.2000000000000002em","vertical-align":"-0.35000000000000003em"}}),s("span",{staticClass:"base displaystyle textstyle uncramped"},[s("span",{staticClass:"mord"},[s("span",{staticClass:"mtable"},[s("span",{staticClass:"arraycolsep",staticStyle:{width:"0.5em"}}),s("span",{staticClass:"col-align-c"},[s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"-0.010000000000000009em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"mord displaystyle textstyle uncramped"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.13889em"}},[t._v("P")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("σ")]),s("span",{staticClass:"mclose"},[t._v(")")]),s("span",{staticClass:"mbin"},[t._v("∧")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[t._v("I")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("b")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit"},[t._v("μ")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit"},[t._v("c")])])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05764em"}},[t._v("S")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05764em"}},[t._v("S")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.13889em"}},[t._v("T")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.02778em"}},[t._v("O")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.00773em"}},[t._v("R")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.05764em"}},[t._v("E")]),s("span",{staticClass:"mclose"},[t._v(")")]),s("span",{staticClass:"mbin"},[t._v("∧")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit"},[t._v("μ")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathrm"},[t._v("0")]),s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mord mathrm"},[t._v("1")]),s("span",{staticClass:"mclose"},[t._v(")")]),s("span",{staticClass:"mbin"},[t._v("∧")]),s("span",{staticClass:"mopen"},[t._v("(")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[t._v("I")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mclose"},[t._v("!")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("σ")]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[t._v("I")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("a")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mclose"},[s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathrm"},[t._v("0")]),s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"mclose"},[t._v(")")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"arraycolsep",staticStyle:{width:"0.5em"}})])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.13889em"}},[this._v("P")]),e("span",{staticClass:"mopen"},[this._v("(")]),e("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[this._v("σ")]),e("span",{staticClass:"mclose"},[this._v(")")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.43056em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[this._v("σ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[t._v("I")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("b")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit"},[t._v("μ")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("p")]),s("span",{staticClass:"mord mathit"},[t._v("c")])])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mclose"},[t._v("]")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit"},[t._v("μ")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathrm"},[t._v("0")]),s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mord mathrm"},[t._v("1")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit"},[t._v("μ")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathrm"},[t._v("0")]),s("span",{staticClass:"mclose"},[t._v("]")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.68333em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord"},[e("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[this._v("I")]),e("span",{staticClass:"vlist"},[e("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[e("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[e("span",{staticStyle:{"font-size":"0em"}},[this._v("​")])]),e("span",{staticClass:"reset-textstyle scriptstyle cramped"},[e("span",{staticClass:"mord mathit"},[this._v("s")])])]),e("span",{staticClass:"baseline-fix"},[e("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[e("span",{staticStyle:{"font-size":"0em"}},[this._v("​")])]),this._v("​")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("σ")]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[t._v("I")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("a")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mclose"},[s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathrm"},[t._v("0")]),s("span",{staticClass:"mclose"},[t._v("]")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.68333em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord"},[e("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.07847em"}},[this._v("I")]),e("span",{staticClass:"vlist"},[e("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"-0.07847em"}},[e("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[e("span",{staticStyle:{"font-size":"0em"}},[this._v("​")])]),e("span",{staticClass:"reset-textstyle scriptstyle cramped"},[e("span",{staticClass:"mord mathit"},[this._v("a")])])]),e("span",{staticClass:"baseline-fix"},[e("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[e("span",{staticStyle:{"font-size":"0em"}},[this._v("​")])]),this._v("​")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),s("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),s("span",{staticClass:"base textstyle uncramped"},[s("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("σ")]),s("span",{staticClass:"mopen"},[t._v("[")]),s("span",{staticClass:"mord mathit"},[t._v("x")]),s("span",{staticClass:"mclose"},[s("span",{staticClass:"mclose"},[t._v("]")]),s("span",{staticClass:"vlist"},[s("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),s("span",{staticClass:"reset-textstyle scriptstyle cramped"},[s("span",{staticClass:"mord mathit"},[t._v("s")])])]),s("span",{staticClass:"baseline-fix"},[s("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[s("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Die Spezifikation wird in Pyhton implementiert und nachgewiesen. Dazu kann das\nMythril Framework im Python-Script geladen und anschließend der\n"),e("a",{attrs:{href:"#smart-contract-graph"}},[this._v("Graph")]),this._v(" und die jeweiligen Instructionen wie folgt\nuntersucht werden.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mythril"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ether"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" compile_solidity\n"),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mythril"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ether"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ethcontract "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ETHContract\n"),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mythril"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("analysis"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("symbolic "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" StateSpace\n"),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mythril"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("analysis "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" solver\n"),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mythril"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exceptions "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" UnsatError\n"),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" z3 "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("\n\nname"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytecode "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" compile_solidity"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"test.sol"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncontract "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ETHContract"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytecode"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nstatespace "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" StateSpace"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("contract"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" node_id"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" statespace"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodes"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("            "),s("span",{attrs:{class:"token comment"}},[t._v("# Knoten iterieren")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" instr "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" node"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instruction_list"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                     "),s("span",{attrs:{class:"token comment"}},[t._v("# EVM-Befehle iterieren")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instr"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'opcode'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'SSTORE'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                     "),s("span",{attrs:{class:"token comment"}},[t._v("# (Ib[μpc] == SSTORE)")]),t._v("\n      adr "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" instr"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v("'address'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      sstore_target "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("states"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("adr"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stack"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token number"}},[t._v("1")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("          "),s("span",{attrs:{class:"token comment"}},[t._v("# μs​​[0]")]),t._v("\n      caller "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" BitVec"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"caller"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("256")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                      "),s("span",{attrs:{class:"token comment"}},[t._v("# Is")]),t._v("\n      storage_0 "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" BitVec"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"storage_0"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("256")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                "),s("span",{attrs:{class:"token comment"}},[t._v("# σ[I​a​]​s​​[0]")]),t._v("\n      constr "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constraints\n      constr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sstore_target "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                   "),s("span",{attrs:{class:"token comment"}},[t._v("# (μ​s​​[0] == 1)")]),t._v("\n      constr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UDiv"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("storage_0"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("256")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" caller"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),s("span",{attrs:{class:"token comment"}},[t._v("# (I​s​​ != σ[I​a​]​s​​[0])")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("try")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          model "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" solver"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_model"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("constr"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                "),s("span",{attrs:{class:"token comment"}},[t._v("# P(σ)")]),t._v("\n          "),s("span",{attrs:{class:"token keyword"}},[t._v("print")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Abweichung von der Spezifikation in "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" node"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("function_name"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("except")]),t._v(" UnsatError"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"maian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maian","aria-hidden":"true"}},[this._v("#")]),this._v(" MAIAN")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Wie "),e("a",{attrs:{href:"#mythril"}},[this._v("Mythril")]),this._v(" ist auch dieses Tool spezialisiert auf die formale\nVerifikation von Ethereum Smart Contracts. Während Mythril jedoch eine\nTransaktion isoliert betrachtet, verwendet MAIAN eine Kette von systematisch\nangelegten State und Stack Kombinationen um Schwachstellen im Smart Contract\naufzuspüren ["),e("a",{attrs:{href:"#ref_niko18"}},[this._v("NIKO18")]),this._v("]. Dabei ordnet MAIAN die Schwachstellen\nin die folgenden Kategorien ein.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("p",[s("strong",[t._v("Prodigal Contracts")])]),s("p",[t._v("In diese Klasse werden Smart Contracts eingeordnet, die Zahlungen an Empfänger\nschicken die keine Besitzer sind, jemals eine Einzahlung getätigt haben oder\nFunktionsparameter erwarten, die nicht auch von einem beliebigen User stammen\nkönnen.")])]),s("li",[s("p",[s("strong",[t._v("Suicidal Contracts")])]),s("p",[t._v("Sind Smart Contracts, die von einem beliebigen User zerstört werden können, in\ndem eine Funktion aufgerufen wird, die den "),s("code",[t._v("SELFDESTRUCT")]),t._v(" EVM-Befehl ausführt.")])]),s("li",[s("p",[s("strong",[t._v("Greedy Contracts")])]),s("p",[t._v("In die Kategorie fallen alle Smart Contracts, die einmal getätigte\nEinzahlungen, unter keinen Umständen mehr ausgezahlt werden können.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Um einen Smart Contract in eine oder mehrere Kategorien einzuordnen, arbeitet\nsich MAIAN durch die EVM-Befehle im Smart Contract, beginnend mit dem ersten\nEVM-Befehl, und spannt dabei rekursiv einen Suchbaum auf mit den nötigen State\nVariablen Stack Zuständen um diese Verzweigung im Bytecode zu repräsentieren.\nWird ein terminierender EVM-Befehl wie z.B. RETURN oder REVERT erreicht oder die\nSuche in einem Pfad kann nicht in einem vorgegeben Zeitrahmen abgeschlossen\nwerden, so wird die Suche in dem aktuellen Pfad beendet und per Backtracking\nder nächste Pfad untersucht. Wird nun in einem Pfad der gesuchte EVM-Befehl, wie\nz.B. "),e("code",[this._v("SELFDESTRUCT")]),this._v(" für Suicidal Contracts oder "),e("code",[this._v("CALL")]),this._v(" für Prodigal Contracts,\ngefunden, wird die Ausführung beendet und die entsprechende Schwachstelle\ninkl. der Parameter um den Pfad zu erreichen ausgegeben.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"zusammenfassung"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zusammenfassung","aria-hidden":"true"}},[this._v("#")]),this._v(" Zusammenfassung")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Beim Vergleich der beiden Tools lässt sich zusammenfassend sagen, dass sich\nMythril Bottom-Up durch die EVM-Befehle in einem Smart Contract arbeitet,\nwährend MAIAN Top-Down durch alle Befehle arbeitet und diese dabei auch\nausführt, um den Suchbaum, Stack und State entsprechend aufzubauen. Dies führt\ndazu, dass die Ausführung einer Spezifikation längere Zeit beansprucht. Mythril\nhingegen sucht zunächst den entsprechenden EVM-Befehl ("),e("code",[this._v("SELFDESTRUCT")]),this._v(", "),e("code",[this._v("CALL")]),this._v(",\netc..) in einer flachen Liste und arbeitet sich dann rückwärts den Pfad hoch,\num die Bedingungen für alle möglichen Pfade zu analysieren.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Tool")]),e("th",[this._v("Mythril")]),e("th",[this._v("MAIAN")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord textstyle uncramped"},[e("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.02778em"}},[this._v("O")])]),e("span",{staticClass:"mopen"},[this._v("(")]),e("span",{staticClass:"mord mathit"},[this._v("n")]),e("span",{staticClass:"mclose"},[this._v(")")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),e("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),e("span",{staticClass:"base textstyle uncramped"},[e("span",{staticClass:"mord textstyle uncramped"},[e("span",{staticClass:"mord mathcal",staticStyle:{"margin-right":"0.02778em"}},[this._v("O")])]),e("span",{staticClass:"mopen"},[this._v("(")]),e("span",{staticClass:"mop"},[this._v("lo"),e("span",{staticStyle:{"margin-right":"0.01389em"}},[this._v("g")])]),e("span",{staticClass:"mord mathit"},[this._v("n")]),e("span",{staticClass:"mclose"},[this._v(")")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Untersuchte Schwachstellen")]),e("td",[this._v("19")]),e("td",[this._v("3")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Dokumentation*")]),e("td",[this._v("+")]),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Verifikation API*")]),e("td",[this._v("++")]),e("td",[this._v("+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Usability*")]),e("td",[this._v("+++")]),e("td",[this._v("+++")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("Installation*")]),e("td",[this._v("+++")]),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"referenzen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#referenzen","aria-hidden":"true"}},[this._v("#")]),this._v(" Referenzen")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_cast16"}},[this._v("[CAST16]")]),this._v(": Michael del Castillo: The DAO Attacked: Code Issue Leads to $60 Million Ether Theft")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_evm18"}},[this._v("[EVMO18]")]),this._v(": Ethereum VM (EVM) Opcodes and Instruction Reference. "),e("a",{attrs:{href:"https://github.com/trailofbits/evm-opcodes",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_gove16"}},[this._v("[GOVE16]")]),this._v(": Governmental’s 1100eth jackpot payout is stuck because it uses too much gas. "),e("a",{attrs:{href:"https://www.reddit.com/r/ethereum/comments/4ghzhv/",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_hild17"}},[this._v("[HILD17]")]),this._v(": Everett Hildenbrandt, et al.: KEVM: A Complete Semantics of the Ethereum Virtual Machine")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_hira17"}},[this._v("[HIRA17]")]),this._v(": Yoichi Hirai: Defining the Ethereum Virtual Machine for Interactive Theorem Provers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_lask18"}},[this._v("[LASK18]")]),this._v(": Henry M., Kim Marek Laskowski: Toward an ontology‐driven blockchain design for supply‐chain provenance.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_niko18"}},[this._v("[NIKO18]")]),this._v(": Ivica Nikolic, Aashish Kolluri, Ilya Sergey: Finding The Greedy, Prodigal, and Suicidal Contracts at Scale")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_reif99"}},[this._v("[REIF99]")]),this._v(": Wolfgang Reif: Formale Methoden für sicherheitskritische Software – Der KIV-Ansatz")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_reyn18"}},[this._v("[REYN18]")]),this._v(": Ana Reyna, Cristian Martín, Jaime Chen, Enrique Soler, Manuel Díaz: On blockchain and its integration with IoT. Challenges and opportunities.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_seac18"}},[this._v("[SEAC18]")]),this._v(": Robert Seacord: Top 10 Secure Coding Practices. "),e("a",{attrs:{href:"https://wiki.sei.cmu.edu/confluence/display/seccode/Top+10+Secure+Coding+Practices",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_stru18"}},[this._v("[STRU18]")]),this._v(": Strugar,  D., Hussain, R., Mazzara, M., Rivera, V.: M2M billing for electric autonomous vehicles.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_voll18"}},[this._v("[VOLL18]")]),this._v(": Franz Volland: Checks Effects Interactions. "),e("a",{attrs:{href:"https://fravoll.github.io/solidity-patterns/checks_effects_interactions.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{name:"ref_wood18"}},[this._v("[WOOD18]")]),this._v(": Gavin Wood: ETHEREUM: A SECURE DECENTRALISED GENERALISED TRANSACTION LEDGER BYZANTIUM VERSION "),e("a",{attrs:{href:"https://ethereum.github.io/yellowpaper/paper.pdf",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online")])])}],a=s(0),i=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),s("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"}}),s("link",{attrs:{rel:"stylesheet",href:"https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css"}}),s("p",[t._v("Autor: Cem Basoglu")]),s("p",[t._v("Mit der Erweiterung der Blockchain und Distributed Ledger Technologien um "),s("router-link",{attrs:{to:"/blockchain/usecases/#smart-contracts"}},[t._v("Smart\nContracts")]),t._v(", ergeben sich vielseitige\nMöglichkeiten für neue und bestehende Anwendungsbereiche\n["),s("a",{attrs:{href:"#ref_reyn18"}},[t._v("REYN18")]),t._v(", "),s("a",{attrs:{href:"#ref_lask18"}},[t._v("LASK18")]),t._v(", "),s("a",{attrs:{href:"#ref_stru18"}},[t._v("STRU18")]),t._v("]. Wie mit\njeder neuen Technologie, aus denen sich neue Möglichkeiten ergeben, gehen diese\nauch bei Smart Contracts mit neuen Risiken einher. Neben rechtlichen und\nfinanziellen Risiken nehmen Fehler im Design bzw. der Implementierung von\nSmart Contracts, einen weitaus größeren Stellenwert ein. Im Gegensatz zu\nklassischen Applikationen, lassen sich einmal veröffentlichte Smart Contracts\nnicht mehr updaten und auch durch die Fehler verursachten Änderungen am\nDistributed Ledger nicht mehr rückgängig machen. In diesem Zusammenhang wirkt\ndie positive "),s("router-link",{attrs:{to:"/blockchain/technologie/#eigenschaften-einer-blockchain"}},[t._v("Eigenschaft")]),t._v("\nvon Distributed Leders, der Unveränderlichkeit von Transaktionsblöcken,\nkontraproduktiv auf die Entwicklung von Smart Contracts.")],1),t._m(1),s("p",[t._v("Da Smart Contracts in der Regel ebenfalls Vermögenswerte verwalten, ist es\nessenziell, mögliche Schwachstellen bereits im Voraus zu erkennen. Dabei liegen\ndie meisten Schwachstellen nicht direkt in dem implementierten Codeblock,\nsondern ergeben sich erst durch die unberücksichtigte Wechselwirkung, mit der\nzugrunde liegenden Smart Contract Plattform.")]),t._m(2),s("p",[t._v("Da Smart Contracts erst in den vergangenen Jahren an Bedeutung gewonnen haben,\nentstehen derartige Schwachstellen, durch den Mangel an Erfahrungen um diese\nzu erkennen und zu vermeiden. In diesem Abschnitt werden daher zunächst die\nhäufigsten Fallstricke betrachtet und anschließend mögliche Vorgehensweisen\npräsentiert.")]),t._m(3),s("p",[t._v("Die Ethereum Virtual Machine (EVM) begrenzt die Call-Stack-Tiefe einer\nTransaktion auf 1024 Aufrufe. Somit kann ein Angreifer die Call-Stack-Tiefe\neiner Transaktion, mittels rekursiven Aufrufen, künstlich vor die Limitierung\npositionieren, um anschließend Fehler in der darauf folgenden zu Verarbeitung\nder Transaktion zu provozieren.")]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),s("p",[t._v("Aus den bisherigen Erfahrungen mit Smart Contracts, im speziellen mit der\nEthereum Virtual Machine, haben sich bestimme Vorgehensweisen und -muster\nergeben. Einige wurden bereits in dem vorangegangen Abschnitten vorgestellt und\nsollen in diesem Abschnitt weiter generalisiert werden.")]),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),s("p",[t._v("Um auf neu entdeckte Sicherheitsrisiken reagieren zu können, bieten sich diverse\nMaßnahmen an. Zum einen lassen sich Schutzmechanismen implementieren, die im\nErnstfall die Ausführung bestimmter Funktionen im Smart Contracts pausieren und\nzum anderen können z.B. Auszahlungen in der Höhe oder Häufigkeit gedrosselt\nwerden, um im Ernstfall genug Zeit für Reaktionen zu haben. Zusätzlich kann ein\nexterner Dienst außerhalb des Distributed Ledgers implementiert werden, der in\nregelmäßigen Abständen die State-Integrität des Smart Contracts prüft und bei\nunschlüssigen Zuständen die Verantwortlichen benachrichtigt.")]),s("p",[t._v("Zwar helfen diese Mechanismen dabei verdächtige Aktivität im Smart Contract zu\nerkennen, um die Sicherheitslücke jedoch zu schließen, ist es notwendig den\nSmart Contract updaten zu können. Da dies, wie einleitend erwähnt, nicht von der\nEthereum Plattform vorgesehen ist, muss entsprechende Funktionalität im Smart\nContract implementiert werden. Hierzu kann eine Funktion implementiert werden,\ndie nur von bestimmten Personen (z.B. dem Besitzer) aufgerufen werden darf und\ndas aktuelle Guthaben und den State des Smart Contracts, an einen neuen Smart\nContract transferiert.")]),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35),s("p",[t._v("Abbildung 2.1.3.1 - Kontrollflussgraph")]),t._m(36),t._m(37),t._m(38),s("p",[s("span",{staticClass:"katex-display"},[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mtable",[s("mtr",[s("mtd",[s("mrow",[s("mi",[t._v("P")]),s("mo",[t._v("(")]),s("mi",[t._v("σ")]),s("mo",[t._v(")")]),s("mo",[t._v("∧")]),s("mo",[t._v("(")]),s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("b")])],1),s("mo",[t._v("[")]),s("msub",[s("mi",[t._v("μ")]),s("mrow",[s("mi",[t._v("p")]),s("mi",[t._v("c")])],1)],1),s("mo",[t._v("]")]),s("mo",[t._v("=")]),s("mo",[t._v("=")]),s("mi",[t._v("S")]),s("mi",[t._v("S")]),s("mi",[t._v("T")]),s("mi",[t._v("O")]),s("mi",[t._v("R")]),s("mi",[t._v("E")]),s("mo",[t._v(")")]),s("mo",[t._v("∧")]),s("mo",[t._v("(")]),s("msub",[s("mi",[t._v("μ")]),s("mi",[t._v("s")])],1),s("mo",[t._v("[")]),s("mn",[t._v("0")]),s("mo",[t._v("]")]),s("mo",[t._v("=")]),s("mo",[t._v("=")]),s("mn",[t._v("1")]),s("mo",[t._v(")")]),s("mo",[t._v("∧")]),s("mo",[t._v("(")]),s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("s")])],1),s("mo",[t._v("!")]),s("mo",[t._v("=")]),s("mi",[t._v("σ")]),s("mo",[t._v("[")]),s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("a")])],1),s("msub",[s("mo",[t._v("]")]),s("mi",[t._v("s")])],1),s("mo",[t._v("[")]),s("mn",[t._v("0")]),s("mo",[t._v("]")]),s("mo",[t._v(")")])],1)],1)],1)],1)],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\begin{array}{c}\nP(\\sigma) \\wedge (I_b[\\mu_{pc}] == SSTORE) \\wedge (\\mu_s[0] == 1) \\wedge (I_s != \\sigma[I_a]_s[0])\n\\end{array}")])],1)],1)],1),t._m(39)])])]),s("span",{staticStyle:{"font-size":"2px"}},[t._v("_")]),s("p",[t._v("Ein Verstoß gegen die Spezifikation kann nachgewiesen werden, wenn zu einem\nbeliebigen Zeitpunkt diese logische Bedingung erfüllt werden kann. Dabei prüft\n"),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mi",[t._v("P")]),s("mo",[t._v("(")]),s("mi",[t._v("σ")]),s("mo",[t._v(")")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("P(\\sigma)")])],1)],1)],1),t._m(40)]),t._v(" ob es einen "),s("a",{attrs:{href:"#smart-contract-graph"}},[t._v("Pfad")]),t._v(", unter Verwendung des\nglobalen Zustands ("),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mi",[t._v("σ")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\sigma")])],1)],1)],1),t._m(41)]),t._v("), zu der Instruction ("),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("b")])],1),s("mo",[t._v("[")]),s("msub",[s("mi",[t._v("μ")]),s("mrow",[s("mi",[t._v("p")]),s("mi",[t._v("c")])],1)],1),s("mo",[t._v("]")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("I_b[\\mu_{pc}]")])],1)],1)],1),t._m(42)]),t._v(") am aktuellen\nProgrammcounter gibt und ob dieser dem "),s("code",[t._v("SSTORE")]),t._v(" EVM-Befehl entspricht. Diese\nInstruction ist laut dem EVM-"),s("em",[t._v("Instruction-Set")]),t._v(" der einzige Maschinenbefehl, der\nden Speicher und damit die State-Variablen des Smart Contracts ändern kann. Die\nTeilbedingung "),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("msub",[s("mi",[t._v("μ")]),s("mi",[t._v("s")])],1),s("mo",[t._v("[")]),s("mn",[t._v("0")]),s("mo",[t._v("]")]),s("mo",[t._v("=")]),s("mo",[t._v("=")]),s("mn",[t._v("1")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\mu_s[0] == 1")])],1)],1)],1),t._m(43)]),t._v(" erfordert, dass die oberste Position im Stack\n("),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("msub",[s("mi",[t._v("μ")]),s("mi",[t._v("s")])],1),s("mo",[t._v("[")]),s("mn",[t._v("0")]),s("mo",[t._v("]")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\mu_s[0]")])],1)],1)],1),t._m(44)]),t._v(") mit dem Wert 1 befüllt ist. Da der "),s("code",[t._v("SSTORE")]),t._v("-Befehl, die Smart\nContract Speicheradresse von der obersten Position im Stack liesst, wird somit\ngeprüft, ob die gewünschte State-Variable geändert werden soll. An welcher\nSpeicheradresse eine Variable persistiert wird, hängt von der Reihenfolge der\nim Solidity-Code definierten Variablen ab. Sind alle bisherigen Teilbedingungen\nerfüllt, kann somit nachgewiesen werden, dass die aktuell auszuführende\nInstruction die State-Variable an der Speicheradresse 1 beschreibt. Da\nzusätzlich nachgewiesen werden soll, ob die State-Variable von jemand anderem\nals dem Smart Contract Besitzer geändert wird, prüft die letzte Teilbedingung,\nob der aktuelle Aufrufer ("),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("s")])],1)],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("I_s")])],1)],1)],1),t._m(45)]),t._v(") vom Besitzer abweicht. Da Smart Contracts das\nKonzept eines Besitzer nicht nativ unterstützen, wird der Besitzer in der Regel\nim Konstruktor des Smart Contracts in einer State-Variable gespeichert. In\ndiesem Beispiel wird mit "),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mi",[t._v("σ")]),s("mo",[t._v("[")]),s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("a")])],1),s("msub",[s("mo",[t._v("]")]),s("mi",[t._v("s")])],1),s("mo",[t._v("[")]),s("mn",[t._v("0")]),s("mo",[t._v("]")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\sigma[I_a]_s[0]")])],1)],1)],1),t._m(46)]),t._v(" angenommen, dass der Besitzer in der\nSpeicheradresse 0 des Smart Contracts "),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("msub",[s("mi",[t._v("I")]),s("mi",[t._v("a")])],1)],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("I_a")])],1)],1)],1),t._m(47)]),t._v(" des globalen States "),s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mi",[t._v("σ")]),s("mo",[t._v("[")]),s("mi",[t._v("x")]),s("msub",[s("mo",[t._v("]")]),s("mi",[t._v("s")])],1)],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\sigma[x]_s")])],1)],1)],1),t._m(48)]),t._v("\ngehalten wird.\n"),s("span",{staticStyle:{"font-size":"2px"}},[t._v("_")])]),t._m(49),t._m(50),s("p",[t._v("Auf diese Weise lassen sich Smart Contracts flexible und automatisiert formal\nverifizieren. Über die hier dargestellten Möglichkeiten hinaus, bietet das\nMythril Framework auch noch weitere nützliche Funktionen, wie das Testen von\nbereits in der Blockchain veröffentlichten Smart Contracts, als auch das\nDurchsuchen aller veröffentlichten Smart Contracts nach bestimmten EVM-Befehlen.")]),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),s("p",[t._v("Beide Tools sind kaum dokumentiert und nur Mythril besitzt eine Github-Wiki-Seite\nmit den grundlegenden Informationen zur Installation und Nutzung. Die\nVerifikation-API von Mythril ist auch ohne Dokumentation noch gut verständlich,\nwährend MAIAN undokumentierte globale Variablen für die Kommunikation zwischen\nden einzelnen Komponenten nutzt, dessen Verantwortlichkeiten sich erst nach dem\nEinlesen in den Quellcode der einzelnen Komponenten offenbaren.")]),s("p",[t._v("In der Benutzung sind beide Tools gleich einfach aufgebaut. Bei der Installation\ndagegen ist Mythril, aufgrund des Docker-Images, zügiger einsatzbereit und\nvereinfacht durch das APT/Brew Package-Repository die native Installation auf\ndem System. MAIAN beschränkt sich hierbei auf das Clonen des GIT-Repositories\nund die manuelle Installation der benötigten Abhängigkeiten in den\nentsprechenden Versionen.")]),s("table",[t._m(57),s("tbody",[s("tr",[s("td",[t._v("Kosten")]),s("td",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mrow",[s("mi",{attrs:{mathvariant:"script"}},[t._v("O")])],1),s("mo",[t._v("(")]),s("mi",[t._v("n")]),s("mo",[t._v(")")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\mathcal{O}(n)")])],1)],1)],1),t._m(58)])]),s("td",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",[s("semantics",[s("mrow",[s("mrow",[s("mi",{attrs:{mathvariant:"script"}},[t._v("O")])],1),s("mo",[t._v("(")]),s("mi",[t._v("log")]),s("mi",[t._v("n")]),s("mo",[t._v(")")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\mathcal{O}(\\log n)")])],1)],1)],1),t._m(59)])])]),t._m(60),t._m(61),t._m(62),t._m(63),t._m(64)])]),s("p",[t._v("*max. Bewertung: +++")]),t._m(65),t._m(66),t._m(67),t._m(68),t._m(69),t._m(70),t._m(71),t._m(72),t._m(73),t._m(74),t._m(75),t._m(76),t._m(77),t._m(78)])},n,!1,null,null,null);e.default=i.exports},65:function(t,e,s){t.exports=s.p+"assets/img/control_flow.1bd9d1fe.png"}}]);