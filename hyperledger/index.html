<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SGSE 18 | Hyperledger Fabric Extension</title>
    <meta name="description" content="Kursmaterial für das Fach &quot;Spezielle Gebiete zum Software Engineering&quot;">
    <link rel="icon" href="/book/logo.png">
    
    <link rel="preload" href="/book/assets/css/33.styles.e6fa9992.css" as="style"><link rel="preload" href="/book/assets/js/app.3aaa1e9e.js" as="script"><link rel="preload" href="/book/assets/js/8.63933125.js" as="script"><link rel="prefetch" href="/book/assets/js/0.56a51051.js"><link rel="prefetch" href="/book/assets/js/1.a914ce3b.js"><link rel="prefetch" href="/book/assets/js/2.35dd7b9e.js"><link rel="prefetch" href="/book/assets/js/3.d60a16d7.js"><link rel="prefetch" href="/book/assets/js/4.810677bf.js"><link rel="prefetch" href="/book/assets/js/5.4aff97c5.js"><link rel="prefetch" href="/book/assets/js/6.d978b3c3.js"><link rel="prefetch" href="/book/assets/js/7.2ca0a1d4.js"><link rel="prefetch" href="/book/assets/js/9.7e31eaf6.js"><link rel="prefetch" href="/book/assets/js/10.dc54b481.js"><link rel="prefetch" href="/book/assets/js/11.ed7645f7.js"><link rel="prefetch" href="/book/assets/js/12.776fb90b.js"><link rel="prefetch" href="/book/assets/js/13.a329b2dd.js"><link rel="prefetch" href="/book/assets/js/14.b7c93444.js"><link rel="prefetch" href="/book/assets/js/15.2aff8602.js"><link rel="prefetch" href="/book/assets/js/16.faed462e.js"><link rel="prefetch" href="/book/assets/js/17.c06e7948.js"><link rel="prefetch" href="/book/assets/js/18.dae4a984.js"><link rel="prefetch" href="/book/assets/js/19.35e28c32.js"><link rel="prefetch" href="/book/assets/js/20.bfe5d743.js"><link rel="prefetch" href="/book/assets/js/21.1da00a73.js"><link rel="prefetch" href="/book/assets/js/22.0f3a6d55.js"><link rel="prefetch" href="/book/assets/js/23.30147d79.js"><link rel="prefetch" href="/book/assets/js/24.efc630c2.js"><link rel="prefetch" href="/book/assets/js/25.4b3ebb30.js"><link rel="prefetch" href="/book/assets/js/26.b4e027df.js"><link rel="prefetch" href="/book/assets/js/27.1ff5bd16.js"><link rel="prefetch" href="/book/assets/js/28.71ca776c.js"><link rel="prefetch" href="/book/assets/js/29.6eac0642.js"><link rel="prefetch" href="/book/assets/js/30.0c8be916.js"><link rel="prefetch" href="/book/assets/js/31.014bf996.js"><link rel="prefetch" href="/book/assets/js/32.7f3e5ffa.js">
    <link rel="stylesheet" href="/book/assets/css/33.styles.e6fa9992.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/book/" class="home-link router-link-active"><!----><span class="site-name">
      SGSE 18
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/book/kurs/" class="nav-link">Kursmaterial</a></div><a href="https://github.com/SGSE18/book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/book/kurs/" class="nav-link">Kursmaterial</a></div><a href="https://github.com/SGSE18/book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Grundlagen</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Distributed Ledger</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/book/smartcontract/" class="sidebar-link">Smart Contracts</a></li><li><a href="/book/hyperledger/" class="active sidebar-link">Hyperledger Fabric Extension</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/hyperledger/#anforderungen" class="sidebar-link">Anforderungen</a></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#analyse" class="sidebar-link">Analyse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/hyperledger/#fabric-client" class="sidebar-link">Fabric Client</a></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#chrome-extension" class="sidebar-link">Chrome Extension</a></li></ul></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#entwurf" class="sidebar-link">Entwurf</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/hyperledger/#architektur" class="sidebar-link">Architektur</a></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#sequenzdiagramme" class="sidebar-link">Sequenzdiagramme</a></li></ul></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#evaluation" class="sidebar-link">Evaluation</a></li><li class="sidebar-sub-header"><a href="/book/hyperledger/#referenzen" class="sidebar-link">Referenzen</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Continuous Software Engineering</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Architekturen</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fullstack Development</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AI - machine learning</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Embedded</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Blockchain</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="hyperledger-fabric-extension"><a href="#hyperledger-fabric-extension" aria-hidden="true" class="header-anchor">#</a> Hyperledger Fabric Extension</h1><p>Autor: Cem Basoglu</p><p><em>&quot;Hyperledger ist eine bereichsübergreifende Open-Source-Initiative zur Förderung
branchenübergreifender Blockchain-Technologien. An diesem weltweiten
Kooperationsprojekt, das von The Linux Foundation gehostet wird, nehmen führende
Unternehmen aus Branchen wie Banken und Finanzen, Internet of Things,
Supply-Chain, Fertigung und IT teil&quot;</em> [<a href="#ref_hype18">HYPE18</a>].</p><p>Zu den von der Hyperledger Initiative geförderten Projekten gehört unter anderem
auch das von IBM initiierte Fabric Framework. Das Fabric Framework besteht aus
einer Distributed Ledger Plattform und diversen Client Bibliotheken zum Zugriff
auf den Ledger. Weitere Informationen zum Fabric Framework sind im Kapitel
<a href="/book/blockchain/plattformen/#hyperledger">Populäre Blockchain Plattformen</a>
verfügbar.</p><p>Um aus einer Webapplikation heraus mit dem Distributed Ledger zu kommunizieren,
erfordert das derzeitige <a href="https://fabric-sdk-node.github.io/" target="_blank" rel="noopener noreferrer">Fabric SDK</a>
zwangsläufig eine serverseitige Schnittstelle zwischen Hyperledger Fabric und
der clientseitigen Webapplikation. Diese Restriktion ist darin begründet, dass
der Fabric Client zum einen das <code>fs</code> und <code>path</code>-Modul aus Node.js benötigt und
zum anderen eine GRPC Implementierung verwendet, die nicht im Browser lauffähig
ist [<a href="#ref_sang18">SANG18</a>].</p><p>Für die Authentifizierung eines Nutzers gegenüber dem Distributed Ledger,
verwendet das Hyperledger Fabric Framwork x509-Zertfikate. Der mit dem
Zertifikat verbundene private Schlüssel hingegen, wird für die Signierung der
Anfragen verwendet. Da das Fabric SDK die Aufgabe der Authentifizierung
gegenüber dem Distributed Ledger und die Signierung der Anfragen übernimmt,
müssen die Zertifikate und die privaten Schlüssel, je nach Implementierung der
serverseitigen Schnittstelle, auf dem Server vorgehalten oder an diesen mit
jeder Anfrage übertragen werden. Beide Varianten der Implementierung stellen
jedoch ein großes Sicherheitsrisko dar, da der private Schlüssel nur
clientseitig vorgehalten werden sollte [<a href="#ref_miny18">MINY18</a>].</p><p>Moderne Browser wie Chrome, Firefox, Opera oder auch Microsoft Edge, erlauben es
Entwicklern eigene Erweiterungen zu implementieren. Durch die Implementierung
einer Erweiterung, können die oben genannten Sicherheitsrisiken umgangen werden,
indem die Erweiterung die Verwahrung der Zertifikate und die Signierung der
Anfragen übernimmt. Diese Erweiterung kann anschließend aus der clientseitigen
Webapplikation genutzt werden, um mit dem Distributed Ledger zu interagieren.
Somit verbleiben privaten Schlüssel jederzeit beim Client und nur die mit
privaten Schlüssel signierten Anfragen werden über das Netzwerk übertragen.</p><h2 id="anforderungen"><a href="#anforderungen" aria-hidden="true" class="header-anchor">#</a> Anforderungen</h2><p>Die sichere Verwahrung der Zertifikate und privaten Schlüssel stellt die
zentrale Anforderung an die Fabric Chrome Erweiterung dar. Dazu müssen die
Zertifikate und privaten Schlüssel vor einem unberechtigten Zugriff, sowohl
ausserhalb des Browser als auch aus einer Webapplikation heraus, geschützt
werden.</p><p>Der Benutzer muss die Möglichkeit haben neue Zertifikate zu hinterlegen und
bestehende Zertifikate zu verwalten. Dies soll direkt über die Erweiterung im
Browser möglich sein und muss mit einem Passwort gesichert werden.</p><p>Für die Interaktion mit der Erweiterung, muss es eine API bereitgestellt werden
die in die clientseitige Webapplikation eingebunden werden kann. Diese soll
berechtigten Webapplikation die Möglichkeit geben, zu prüfen ob ein Zertifikat
für die aktuelle Webapplikation vorhanden ist. Zusätzlich müssen allgemeine
Informationen über das Zertifikat abgerufen werden können. Für die Interaktion
mit dem Distributed Ledger müssen beliebige Chaincode Funktionen aufgerufen
werden können.</p><h2 id="analyse"><a href="#analyse" aria-hidden="true" class="header-anchor">#</a> Analyse</h2><p>Um die Anforderungen umzusetzen muss zunächst untersucht werden, welche
Möglichkeiten bestehen um aus einer Chrome Extension mit einem gRPC-Dienst zu
kommunizieren und wie aus einer clientseitigen Webapplikation mit der
Extension kommuniziert werden kann.</p><h3 id="fabric-client"><a href="#fabric-client" aria-hidden="true" class="header-anchor">#</a> Fabric Client</h3><p>Wie bereits einleitend erwähnt, benötigt das <a href="https://fabric-sdk-node.github.io/" target="_blank" rel="noopener noreferrer">Fabric SDK</a>
die Module <code>fs</code> und <code>path</code> aus Node.js, um Zertifikate für die Wiederverwendung
abzulegen. Diese Module sind jedoch nicht in einer Browser bzw. Extension
Umgebung verfügbar, sodass für die Persistierung eine alternative Lösung
verwendet werden muss. Zusätzlich verwendet das SDK die <a href="https://www.npmjs.com/package/grpc" target="_blank" rel="noopener noreferrer">gRPC-Node</a>
Bibliothek um mit dem Fabric Netzwerk zu kommunizieren. Dieser Client ist jedoch
als natives C++ Node Module umgesetzt und kann ebenfalls nicht im Browser
verwendet werden.</p><p>Für die Implementierung einer Chrome Extension müssen daher
die Funktionalitäten der Fabric SDK neu implementiert werden. Zu diesen
Funktionalitäten zählt die Interaktion mit der gRPC-Schnittstelle des Fabric
Netzwerks und das erzeugen der kryptografische Signatur zur Signierung der
Anfragen. Um auch aus der Chrome Extension auf das Fabric Netzwerk zuzugreifen,
muss auf eine gRPC Bibliothek zurückgegriffen werden, die auch aus dem Browser
heraus genutzt werden kann. Zu diesem Zweck sollen an dieser Stelle die
alternative gRPC Bibliotheken, auf die Verwendbarkeit im Browser betrachtet
werden.</p><h4 id="grpc-js"><a href="#grpc-js" aria-hidden="true" class="header-anchor">#</a> gRPC-js</h4><p>Die gRPC-js Bibliothek ist ein, ausschliesslich in Javascript implementierter,
gRPC-Client wodurch Abhängigkeit zu der C++ Implementierung wegfällt [<a href="#ref_grjs18">GRJS18</a>].
Diese Bibliothek verwendet das <a href="https://nodejs.org/api/http2.html" target="_blank" rel="noopener noreferrer">HTTP/2</a>-Modul
aus Node.js um mit dem gRPC-Server zu kommunizieren und unterstützt somit
ebenfalls Dienste mit bidirektionalen Datenströmen zwischen Client und Server.</p><p>Das HTTP/2 Protokoll wird zwar ebenfalls von modernen Browsern unterstützt, aber
stellt diese Funktionalitäten implizit über die <code>fetch</code> bzw. <code>XMLHttpRequest</code>
API bereit. Daher kann das dieses Modul ebenfalls nicht Browser eingesetzt
werden, da in diesem das HTTP/2-Modul aus Node.js nicht verfügbar ist.</p><h4 id="grpc-web"><a href="#grpc-web" aria-hidden="true" class="header-anchor">#</a> gRPC-Web</h4><p>Für den Zugriff auf einen gRPC Server aus dem Browser, gibt es seit kurzem
eine öffentliche Beta-Phase der offiziellen gRPC-Web Bibliothek
[<a href="#ref_grwe18">GRWE18</a>]. Diese nutzt intern, je nach Browser und Verfügbarkeit,
die <code>fetch</code> bzw. <code>XMLHttpRequest</code> API</p><h4 id="grpc-web-client"><a href="#grpc-web-client" aria-hidden="true" class="header-anchor">#</a> gRPC-Web-Client</h4><p>https://github.com/improbable-eng/grpc-web</p><h3 id="chrome-extension"><a href="#chrome-extension" aria-hidden="true" class="header-anchor">#</a> Chrome Extension</h3><p><img src="/book/assets/img/messagingarc.7d9a5f1f.png" alt="Chrome Extension Messaging"></p><p><a name="img_2222">Abbildung 2.2.2.2</a> - Chrome Extension Architektur <em>Quelle:</em> [<a href="#ref_chex18">CHEX18</a>]</p><h4 id="popup"><a href="#popup" aria-hidden="true" class="header-anchor">#</a> Popup</h4><h4 id="background-script"><a href="#background-script" aria-hidden="true" class="header-anchor">#</a> Background Script</h4><h4 id="content-script"><a href="#content-script" aria-hidden="true" class="header-anchor">#</a> Content Script</h4><p>https://developer.chrome.com/extensions/content_scripts#host-page-communication</p><h2 id="entwurf"><a href="#entwurf" aria-hidden="true" class="header-anchor">#</a> Entwurf</h2><p>Für die sichere Persistierung der Zertifikate werden diese verschlüsselt im
Browser Storage abgelegt. Der Schlüssel für den Zugriff auf die Zertifikate ist
vom Benutzer einzugeben und dient gleichzeitig als Passwort für die Fabric
Extension. Für den Zugriff aus einer berechtigten Webapplikation muss die Fabric
Extension einmalig entsperrt werden. Anschliessend kann aus der Webapplikation,
mittels einer Javascript Bibliothek, auf die Zertifikate zugegriffen werden.
In den Attributen der Zertifikate ist eine URL in Form eines regulären Ausdrucks
hinterlegt, der die Webapplikation autorisiert auf das Zertifikat zuzugreifen.</p><p>Da die Verwendung der Fabric SDK für Node.js Applikationen ausgelegt ist, muss
direkt mit den Peers und dem Ordering Service kommuniziert werden. Dazu werden
die gRPC-Schnittstellen direkt angesprochen und die Transaktionen in der Fabric
Extension signiert.</p><h3 id="architektur"><a href="#architektur" aria-hidden="true" class="header-anchor">#</a> Architektur</h3><p><img src="/book/assets/img/architecture.ff6fc03c.png" alt="Fabric Extension Architektur"></p><p><a name="img_2231">Abbildung 2.2.3.1</a> - Fabric Extension Architektur</p><h4 id="background-script-2"><a href="#background-script-2" aria-hidden="true" class="header-anchor">#</a> Background Script</h4><h4 id="content-script-2"><a href="#content-script-2" aria-hidden="true" class="header-anchor">#</a> Content Script</h4><h4 id="popup-certificate-service"><a href="#popup-certificate-service" aria-hidden="true" class="header-anchor">#</a> Popup / Certificate Service</h4><h4 id="fabric-extension-client"><a href="#fabric-extension-client" aria-hidden="true" class="header-anchor">#</a> Fabric Extension Client</h4><h3 id="sequenzdiagramme"><a href="#sequenzdiagramme" aria-hidden="true" class="header-anchor">#</a> Sequenzdiagramme</h3><h2 id="evaluation"><a href="#evaluation" aria-hidden="true" class="header-anchor">#</a> Evaluation</h2><p>Zur Evaluation der Fabric Extension wird eine Webapplikation implementiert,
die Information aus der digitalen Patientenakte vom <a href="https://github.com/SGSE18/health-ledger/" target="_blank" rel="noopener noreferrer">Health Ledger Projekt</a>
anzeigt. Dabei steht jedoch die Demonstration der Funktionalität, wie die
Authentifizierung der Webapplikation gegenüber der Erweiterung, im Vordergrund.</p><h2 id="referenzen"><a href="#referenzen" aria-hidden="true" class="header-anchor">#</a> Referenzen</h2><p><a name="ref_hype18">[HYPE18]</a> IBM Blockchain auf Basis von Hyperledger Fabric der Linux Foundation <a href="https://www.ibm.com/blockchain/de-de/hyperledger.html" target="_blank" rel="noopener noreferrer">Online</a></p><p><a name="ref_sang18">[SANG18]</a> Siddesh Sangodkar: Browser compatible fabric-node-sdk <a href="https://jira.hyperledger.org/browse/FAB-8129" target="_blank" rel="noopener noreferrer">Online</a></p><p><a name="ref_miny18">[MINY18]</a> Min Yu: 2018 Projects - Project 5: Hyperledger Fabric Chrome Extension <a href="https://wiki.hyperledger.org/internship/project_ideas" target="_blank" rel="noopener noreferrer">Online</a></p><p><a name="ref_grwe18">[GRWE18]</a> Github: gRPC for Web Clients <a href="https://github.com/grpc/grpc-web" target="_blank" rel="noopener noreferrer">Online</a></p><p><a name="ref_grjs18">[GRJS18]</a> Github: Pure JavaScript gRPC Client <a href="https://github.com/grpc/grpc-node/tree/master/packages/grpc-js-core" target="_blank" rel="noopener noreferrer">Online</a></p><p><a name="ref_chex18">[CHEX18]</a> Google Chrome Extension Dokumentation - Content Scripts <a href="https://developer.chrome.com/extensions/overview#contentScripts" target="_blank" rel="noopener noreferrer">Online</a></p></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/book/smartcontract/" class="prev">
          Smart Contracts
        </a></span><span class="next"><a href="/book/continuous-software-engineering/">
          Continuous Software Engineering
        </a> →
      </span></p></div></div></div></div>
    <script src="/book/assets/js/8.63933125.js" defer></script><script src="/book/assets/js/app.3aaa1e9e.js" defer></script>
  </body>
</html>
